<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="SQL.ProductCompany">
	<select id="getProductCompanyList" resultType="Product"
		parameterType="Product">
		select * from ProductCompany
		WHERE 
		<where>
			<if test = "COMPANY_CD!=null">and COMPANY_CD = '%' ||#{COMPANY_CD}||'%'</if>
			<if test = "COMPANY_NAME!=null">and TRIM(UPPER(COMPANY_NAME)) like '%' ||UPPER(#{COMPANY_NAME})||'%'</if>
	 		<if test = "REG_DATE!=null">and REG_DATE like '%' ||#{REG_DATE}||'%'</if>
	 		<if test = "REMARK!=null">and REMARK like '%' ||#{REMARK}||'%'</if>
	 		<if test = "DEL_YN!=null">and DEL_YN</if>
		</where>
		order by COMPANY_CD
		</select>
		<insert id = "insertProductCompany" parameterType="product">
		insert into PRODUCT_COMPANY(
		COMPANY_CD
		COMPANY_NAME
		REG_DATE
		REMARK
		DEL_YN
		)
		values(
		SEQ_Product_ProductNum.nextval,
		#{COMPANY_CD},
		#{COMPANY_NAME},
		#{REG_DATE},
		to_char(SYSDATE,'YYYY-MM-DD
		HH24:mi:ss'),
		#{REMARK},
		#{DEL_YN},
		)
		</insert>
		<update id="updateProductCompany" parameterType="product">
		update product
		<set>
			<if test="COMPANY_NAME!=null">COMPANY_NAME =
				#{COMPANY_NAME}
			</if>
			<if test="productCategory!=null">ProductCategory =
				#{productCategory},
			</if>

			<if test="REG_DATE!=null">ProductDate =
				#{REG_DATE},
			</if>
			<if test="REMARK!=null">productEndDate =
				#{REMARK},
			</if>
		
			<if test="DEL_YN!=null">, ProductDesc =
				${DEL_YN}
			</if>
			
		</set>
		where COMPANY_CD=#{COMPANY_CD}
		</update>
		
		<delete id="deleteProductCompany" parameterType="product">
		delete from
		product
		where COMPANY_CD=#{COMPANY_CD}
		</delete>
	</mapper>